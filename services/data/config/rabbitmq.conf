# HarmonyFlow SyncBridge - RabbitMQ Configuration
# Phase 1: Foundation (Week 1)

# =============================================================================
# NETWORKING
# =============================================================================
listeners.tcp.default = 5672
management.tcp.port = 15672
management.load_definitions = /etc/rabbitmq/definitions.json

# =============================================================================
# MEMORY AND DISK
# =============================================================================
total_memory_available_override_value = 1GB
vm_memory_high_watermark.relative = 0.7
vm_memory_high_watermark_paging_ratio = 0.5
disk_free_limit.absolute = 1GB

# =============================================================================
# QUEUE SETTINGS
# =============================================================================
queue_master_locator = min-masters
lazy_queue_explicit_gc_run_operation_threshold = 1000

# =============================================================================
# LOGGING
# =============================================================================
log.console = true
log.console.level = info
log.file = false

# =============================================================================
# AUTHENTICATION
# =============================================================================
auth_mechanisms.1 = PLAIN
auth_mechanisms.2 = AMQPLAIN

# =============================================================================
# HEARTBEAT
# =============================================================================
heartbeat = 60

# =============================================================================
# FLOW CONTROL
# =============================================================================
# Prevent publishers from overwhelming consumers

# =============================================================================
# MESSAGE TTL (Time To Live)
# =============================================================================
# Set per-queue in definitions, but defaults here:
# - Events: 24 hours (86400000ms)
# - Audit logs: 7 days (604800000ms)
# - DLQ: No expiration (manual review required)

# =============================================================================
# RABBITMQ SHOVEL (for cross-datacenter replication)
# =============================================================================
# shovel name: harmonyflow_dr
# src-uri: amqp://user:pass@primary-rabbitmq/harmonyflow
# dest-uri: amqp://user:pass@dr-rabbitmq/harmonyflow
# src-queue: events
# dest-exchange: events
